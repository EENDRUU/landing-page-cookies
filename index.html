<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SweetBites Cookies | Homemade Delights</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="  https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css  ">
    <style>
        :root {
            --pastel-pink: #ffd6e7;
            --cream: #fff9f0;
            --mint: #d0f4de;
            --light-brown: #e8d5b5;
            --accent-pink: #ff9ec6;
            --accent-mint: #88e0b0;
            --text-dark: #5a4a42;
            --text-light: #8a7f8d;
            --white: #ffffff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--cream);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3, h4 {
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        .btn {
            display: inline-block;
            padding: 12px 28px;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            box-shadow: var(--shadow);
        }

        .btn-primary {
            background: var(--accent-pink);
            color: var(--white);
        }

        .btn-primary:hover {
            background: #ff7fb3;
            transform: translateY(-3px);
        }

        .btn-secondary {
            background: var(--accent-mint);
            color: var(--white);
            margin-left: 15px;
        }

        .btn-secondary:hover {
            background: #66c999;
            transform: translateY(-3px);
        }

        .section {
            padding: 80px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
            position: relative;
        }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--accent-pink);
            border-radius: 2px;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--pastel-pink) 0%, var(--mint) 100%);
            padding: 100px 0;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 650px;
        }

        .hero h1 {
            font-size: 3.2rem;
            margin-bottom: 20px;
            color: var(--text-dark);
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: var(--text-dark);
        }

        .hero-btns {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .cookie-illustration {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 45%;
            opacity: 0.8;
            z-index: 1;
        }

        /* Features Section */
        .features {
            background-color: var(--white);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .feature-card {
            background: var(--cream);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            background: var(--pastel-pink);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 28px;
            color: var(--accent-pink);
        }

        /* Menu Section */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .menu-card {
            background: var(--white);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .menu-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .menu-img {
            height: 220px;
            background: var(--light-brown);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: var(--accent-pink);
        }

        .menu-content {
            padding: 25px;
        }

        .menu-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--accent-pink);
            margin: 10px 0;
        }

        /* Reviews Section */
        .reviews-section {
            background: var(--mint);
            padding: 60px 0;
        }

        .reviews-container {
            display: flex;
            gap: 40px;
            flex-wrap: wrap;
        }

        .review-form-container {
            flex: 1;
            min-width: 300px;
            background: var(--white);
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--shadow);
        }

        .reviews-list {
            flex: 1;
            min-width: 300px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .review-item {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .review-name {
            font-weight: 600;
        }

        .review-date {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .review-stars {
            color: #ffcc00;
            margin: 8px 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--accent-pink);
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 158, 198, 0.2);
        }

        .rating {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }

        .star {
            font-size: 1.5rem;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star.active, .star:hover {
            color: #ffcc00;
        }

        /* Special Offer */
        .special-offer {
            background: var(--pastel-pink);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .offer-content {
            max-width: 700px;
            margin: 0 auto;
            padding: 50px 20px;
            position: relative;
            z-index: 2;
        }

        .offer-content h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .offer-tag {
            display: inline-block;
            background: var(--accent-pink);
            color: white;
            padding: 8px 20px;
            border-radius: 30px;
            font-weight: 700;
            margin: 15px 0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* About Section */
        .about-content {
            display: flex;
            align-items: center;
            gap: 50px;
        }

        .about-text {
            flex: 1;
        }

        .about-illustration {
            flex: 1;
            background: var(--light-brown);
            height: 400px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8rem;
            color: var(--accent-mint);
        }

        /* FAQ Section */
        .faq {
            background: var(--white);
        }

        .faq-item {
            margin-bottom: 20px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .faq-question {
            padding: 20px 25px;
            background: var(--cream);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-answer {
            padding: 0 25px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .faq-item.active .faq-answer {
            padding: 20px 25px;
            max-height: 500px;
        }

        /* Contact Section */
        .contact {
            background: var(--mint);
        }

        .contact-content {
            display: flex;
            gap: 50px;
        }

        .contact-info {
            flex: 1;
        }

        .contact-form {
            flex: 1;
            background: var(--white);
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--shadow);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--white);
            color: var(--accent-pink);
            font-size: 1.5rem;
            transition: var(--transition);
        }

        .social-link:hover {
            background: var(--accent-pink);
            color: var(--white);
            transform: translateY(-3px);
        }

        /* Footer */
        .footer {
            background: var(--pastel-pink);
            padding: 50px 0 20px;
        }

        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-col {
            flex: 1;
            min-width: 250px;
        }

        .footer-logo {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .newsletter-form {
            display: flex;
            margin-top: 20px;
        }

        .newsletter-input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 15px 0 0 15px;
            font-family: 'Poppins', sans-serif;
        }

        .newsletter-btn {
            background: var(--accent-mint);
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 0 15px 15px 0;
            cursor: pointer;
            font-weight: 600;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(0,0,0,0.1);
            color: var(--text-light);
        }

        /* Cookie decoration elements */
        .cookie-deco {
            position: absolute;
            z-index: 0;
            opacity: 0.15;
        }

        .cookie-1 {
            top: 10%;
            left: 5%;
            font-size: 4rem;
            transform: rotate(-20deg);
        }

        .cookie-2 {
            bottom: 15%;
            right: 8%;
            font-size: 5rem;
            transform: rotate(15deg);
        }

        .cookie-3 {
            top: 20%;
            right: 15%;
            font-size: 3rem;
            transform: rotate(30deg);
        }

        /* Scrollbar styling */
        .reviews-list::-webkit-scrollbar {
            width: 8px;
        }

        .reviews-list::-webkit-scrollbar-track {
            background: var(--cream);
            border-radius: 10px;
        }

        .reviews-list::-webkit-scrollbar-thumb {
            background: var(--accent-pink);
            border-radius: 10px;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .about-content,
            .contact-content,
            .reviews-container {
                flex-direction: column;
            }
            
            .about-illustration {
                height: 300px;
            }
            
            .reviews-list {
                max-height: 300px;
            }
        }

        @media (max-width: 768px) {
            .hero {
                padding: 80px 0;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .hero-btns {
                flex-direction: column;
                margin-top: 20px;
            }
            
            .btn-secondary {
                margin-left: 0;
                margin-top: 10px;
            }
            
            .section {
                padding: 60px 0;
            }
            
            .offer-content h2 {
                font-size: 2rem;
            }
        }

        @media (max-width: 576px) {
            .section-title {
                font-size: 1.8rem;
            }
            
            .menu-grid,
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                flex-direction: column;
            }
            
            .review-form-container,
            .reviews-list {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <div class="cookie-deco cookie-1">
            <i class="fas fa-cookie-bite"></i>
        </div>
        <div class="cookie-deco cookie-2">
            <i class="fas fa-cookie"></i>
        </div>
        <div class="cookie-deco cookie-3">
            <i class="fas fa-mug-hot"></i>
        </div>
        <div class="container">
            <div class="hero-content">
                <h1>Fresh Homemade Cookies Just for You!</h1>
                <p>Cookies lembut & renyah dengan bahan pilihan, 100% homemade premium.</p>
                <div class="hero-btns">
                    <a href="https://wa.me/6281234567890  " class="btn btn-primary">Order via WhatsApp</a>
                    <a href="#menu" class="btn btn-secondary">Lihat Menu</a>
                </div>
            </div>
        </div>
        <div class="cookie-illustration">
            <i class="fas fa-cookie-bite" style="font-size: 20rem; color: var(--white);"></i>
        </div>
    </section>

    <!-- Why Choose Us -->
    <section class="section features" id="features">
        <div class="container">
            <h2 class="section-title">Why Choose Us</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-oven"></i>
                    </div>
                    <h3>Baked Fresh Daily</h3>
                    <p>Setiap cookie dipanggang segar setiap hari untuk memastikan kualitas terbaik.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <h3>Premium Ingredients</h3>
                    <p>Hanya menggunakan bahan-bahan premium berkualitas tinggi.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h3>No Preservatives</h3>
                    <p>Tanpa bahan pengawet, 100% alami dan sehat.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-hand-holding-heart"></i>
                    </div>
                    <h3>Halal & Hygiene</h3>
                    <p>Produksi higienis dengan sertifikasi halal resmi.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Menu Section -->
    <section class="section menu" id="menu">
        <div class="container">
            <h2 class="section-title">Our Delicious Cookies</h2>
            <div class="menu-grid" id="menuContainer">
                <!-- Menu items will be loaded here dynamically -->
            </div>
        </div>
    </section>

    <!-- Reviews Section -->
    <section class="reviews-section" id="reviews">
        <div class="container">
            <h2 class="section-title">Customer Reviews</h2>
            <div class="reviews-container">
                <div class="review-form-container">
                    <h3>Share Your Experience333</h3>
                    <form id="reviewForm">
                        <div class="form-group">
                            <label for="reviewerName">Your Name</label>
                            <input type="text" id="reviewerName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="reviewRating">Rating</label>
                            <div class="rating" id="ratingStars">
                                <span class="star" data-value="1">‚òÖ</span>
                                <span class="star" data-value="2">‚òÖ</span>
                                <span class="star" data-value="3">‚òÖ</span>
                                <span class="star" data-value="4">‚òÖ</span>
                                <span class="star" data-value="5">‚òÖ</span>
                            </div>
                            <input type="hidden" id="reviewRating" name="rating" value="5">
                        </div>
                        <div class="form-group">
                            <label for="reviewText">Your Review</label>
                            <textarea id="reviewText" class="form-control" rows="3" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Submit Review</button>
                    </form>
                </div>
                <div class="reviews-list" id="reviewsList">
                    <!-- Reviews will be loaded here dynamically -->
                </div>
            </div>
        </div>
    </section>

    <!-- Special Offer -->
    <section class="section special-offer">
        <div class="offer-content">
            <h2>Special Offer Just For You!</h2>
            <div class="offer-tag">üéÅ Promo Bundle Hemat: Beli 3 cuma 85K!</div>
            <p>Free gift untuk 50 pembeli pertama ‚ù§Ô∏è</p>
            <a href="https://wa.me/6281234567890  " class="btn btn-primary" style="margin-top: 20px;">Claim Your Offer</a>
        </div>
    </section>

    <!-- About Us -->
    <section class="section about">
        <div class="container">
            <h2 class="section-title">About SweetBites Cookies</h2>
            <div class="about-content">
                <div class="about-text">
                    <p>SweetBites Cookies berdiri sejak 2020 dengan misi membawa kebahagiaan melalui kue kering homemade yang lezat dan berkualitas.</p>
                    <p>Kami percaya bahwa setiap cookie harus dibuat dengan cinta, menggunakan bahan-bahan terbaik, dan dipanggang dengan sempurna untuk memberikan pengalaman rasa yang tak terlupakan.</p>
                    <p>Dibuat oleh Ibu Rina, seorang ibu rumah tangga yang memiliki passion dalam membuat kue, SweetBites Cookies kini telah melayani ribuan pelanggan di seluruh Indonesia dengan komitmen pada kualitas dan kepuasan pelanggan.</p>
                </div>
                <div class="about-illustration">
                    <i class="fas fa-bowl-food"></i>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section class="section faq">
        <div class="container">
            <h2 class="section-title">Frequently Asked Questions</h2>
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">
                        Minimal order?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Minimal order adalah 1 toples (isi 12 cookies) per varian.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        Pengiriman ke mana saja?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Kami melayani pengiriman ke seluruh Indonesia melalui JNE, SiCepat, dan GoSend untuk area Jabodetabek.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        Pembayaran via apa saja?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Kami menerima pembayaran melalui transfer bank (BCA, BNI, Mandiri), GoPay, dan OVO.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        Lama proses pesanan?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Pesanan diproses dalam 1-2 hari kerja setelah pembayaran dikonfirmasi. Untuk hari Sabtu-Minggu, proses dimulai hari Senin.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact -->
    <section class="section contact" id="contact">
        <div class="container">
            <h2 class="section-title">Contact & Order</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <h3>Get in Touch</h3>
                    <p>Kami siap melayani pesanan Anda! Hubungi kami melalui:</p>
                    <div style="margin: 25px 0;">
                        <p><i class="fab fa-whatsapp" style="color: #25D366; margin-right: 10px;"></i> WhatsApp: +62 812-3456-7890</p>
                        <p><i class="fab fa-instagram" style="color: #E1306C; margin-right: 10px;"></i> Instagram: @sweetbites_cookies</p>
                    </div>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-whatsapp"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
                <div class="contact-form">
                    <h3>Send Us a Message</h3>
                    <form id="contactForm">
                        <div class="form-group">
                            <label for="name">Nama Lengkap</label>
                            <input type="text" id="name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Pesan</label>
                            <textarea id="message" class="form-control" rows="4" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Kirim Pesan</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <div class="footer-logo">SweetBites Cookies</div>
                    <p>Homemade cookies dengan cinta dan bahan premium terbaik untuk Anda dan keluarga.</p>
                </div>
                <div class="footer-col">
                    <h3>Quick Links</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 10px;"><a href="#menu" style="color: var(--text-dark); text-decoration: none;">Menu</a></li>
                        <li style="margin-bottom: 10px;"><a href="#features" style="color: var(--text-dark); text-decoration: none;">Why Choose Us</a></li>
                        <li style="margin-bottom: 10px;"><a href="#reviews" style="color: var(--text-dark); text-decoration: none;">Reviews</a></li>
                        <li style="margin-bottom: 10px;"><a href="#contact" style="color: var(--text-dark); text-decoration: none;">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Newsletter</h3>
                    <p>Subscribe untuk promo terbaru dan info produk!</p>
                    <form class="newsletter-form">
                        <input type="email" class="newsletter-input" placeholder="Your email address" required>
                        <button type="submit" class="newsletter-btn">Subscribe</button>
                    </form>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 SweetBites Cookies. All rights reserved.</p>
            </div>
        </div>
    </footer>

<script type="module">
  // Import Firebase SDK (v9 modular)
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import {
    getFirestore,
    collection,
    getDocs,
    addDoc,
    serverTimestamp,
    query,
    orderBy,
    enableIndexedDbPersistence
  } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

  // Initialize Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCHEZFx4mTGcGENt45T7YcUHaPRL_cqSJo",
    authDomain: "landing-page-a6257.firebaseapp.com",
    projectId: "landing-page-a6257",
    storageBucket: "landing-page-a6257.firebasestorage.app",
    messagingSenderId: "793117573169",
    appId: "1:793117573169:web:dfcbf907951a70d2e29510",
    measurementId: "G-MNVFQB0MG8"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Enable offline persistence
  enableIndexedDbPersistence(db).catch(err => {
    if (err.code === 'failed-precondition') {
      console.warn("Persistence failed: multiple tabs open");
    } else if (err.code === 'unimplemented') {
      console.warn("Persistence not available");
    }
  });


  // DOM elements
  const menuContainer = document.getElementById('menuContainer');
  const reviewsList = document.getElementById('reviewsList');
  const reviewForm = document.getElementById('reviewForm');
  const ratingStars = document.querySelectorAll('.star');
  const ratingInput = document.getElementById('reviewRating');

  let currentRating = 5;

  // --- STAR RATING ---
  ratingStars.forEach(star => {
    star.addEventListener('click', () => {
      currentRating = parseInt(star.dataset.value);
      ratingInput.value = currentRating;
      updateStars();
    });
    star.addEventListener('mouseover', () => highlightStars(parseInt(star.dataset.value)));
    star.addEventListener('mouseout', () => highlightStars(currentRating));
  });

  function updateStars() {
    ratingStars.forEach(star => {
      const value = parseInt(star.dataset.value);
      star.classList.toggle('active', value <= currentRating);
    });
  }

  function highlightStars(value) {
    ratingStars.forEach(star => {
      const starValue = parseInt(star.dataset.value);
      star.classList.toggle('active', starValue <= value);
    });
  }

  // --- LOAD MENU FROM FIRESTORE ---
  async function loadMenu() {
    try {
      const menuSnapshot = await getDocs(collection(db, 'menu'));
      const menuData = [];
      menuSnapshot.forEach(doc => menuData.push({ id: doc.id, ...doc.data() }));

      if (menuData.length === 0) {
        menuContainer.innerHTML = '<p>Menu kosong. Admin belum menambahkan menu.</p>';
        return;
      }

      menuContainer.innerHTML = menuData.map(item => `
        <div class="menu-card">
          <div class="menu-img"><i class="fas ${item.icon}"></i></div>
          <div class="menu-content">
            <h3>${item.name}</h3>
            <p>${item.description}</p>
            <div class="menu-price">Rp ${item.price.toLocaleString('id-ID')}</div>
            <a href="https://wa.me/6281234567890" class="btn btn-primary">Order Now</a>
          </div>
        </div>
      `).join('');
    } catch (error) {
      console.error("Error loading menu:", error);
      menuContainer.innerHTML = '<p>Error loading menu. Please try again later.</p>';
    }
  }

  // --- LOAD REVIEWS FROM FIRESTORE ---
  async function loadReviews() {
    try {
      const q = query(collection(db, 'reviews'), orderBy('date', 'desc'));
      const reviewsSnapshot = await getDocs(q);
      const reviews = [];
      reviewsSnapshot.forEach(doc => {
        const data = doc.data();
        reviews.push({
          id: doc.id,
          name: data.name,
          text: data.text,
          rating: data.rating,
          date: data.date ? data.date.toDate().toISOString() : new Date().toISOString()
        });
      });

      if (reviews.length === 0) {
        reviewsList.innerHTML = '<p class="no-reviews">Be the first to leave a review!</p>';
        return;
      }

      reviewsList.innerHTML = reviews.map(review => `
        <div class="review-item">
          <div class="review-header">
            <div class="review-name">${review.name}</div>
            <div class="review-date">${new Date(review.date).toLocaleDateString('id-ID', {
              year: 'numeric', month: 'short', day: 'numeric'
            })}</div>
          </div>
          <div class="review-stars">${'‚òÖ'.repeat(review.rating)}${'‚òÜ'.repeat(5 - review.rating)}</div>
          <p>${review.text}</p>
        </div>
      `).join('');
    } catch (error) {
      console.error("Error loading reviews:", error);
      reviewsList.innerHTML = '<p class="no-reviews">Error loading reviews. Please try again later.</p>';
    }
  }

  // --- SUBMIT REVIEW TO FIRESTORE ---
reviewForm.addEventListener('submit', async (e) => {
  e.preventDefault();

  // Ambil nilai input
  const name = document.getElementById('reviewerName').value.trim();
  const text = document.getElementById('reviewText').value.trim();
  const rating = parseInt(ratingInput.value);

  // Validasi sederhana sebelum submit
  if (!name || !text || isNaN(rating) || rating < 1 || rating > 5) {
    alert('Please fill in all fields and select a valid rating.');
    return;
  }

  try {
    // Tambahkan review ke Firestore (v9 modular)
    await addDoc(collection(db, 'reviews'), {
      name: name,
      text: text,
      rating: rating,
      date: serverTimestamp() // timestamp server
    });

    // Tampilkan pesan sukses
    alert('Thank you for your review!');

    // Reset form dan rating
    reviewForm.reset();
    currentRating = 5;
    ratingInput.value = 5;
    updateStars();

    // Load ulang review terbaru
    loadReviews();
  } catch (error) {
    console.error("Error submitting review:", error);

    // Pesan error spesifik untuk developer
    if (error.code === 'permission-denied') {
      alert('You do not have permission to write reviews. Check Firestore rules.');
    } else {
      alert('Error submitting review. Please try again.');
    }
  }
});


  // --- INIT PAGE ---
  document.addEventListener('DOMContentLoaded', () => {
    updateStars();
    loadMenu();
    loadReviews();
  });
</script>

</body>
</html>